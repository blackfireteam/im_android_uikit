buildscript {
    configurations.all {
        resolutionStrategy.cacheChangingModulesFor 0, 'seconds'
    }

    def msimsdk = [:]
    rootProject.ext.msimsdk = msimsdk
    msimsdk.deps = [:]
    msimsdk.deps.msimsdk = "io.github.blackfireteam.msimsdk:imsdk:1.0-SNAPSHOT"
    msimsdk.deps.msimsdk_push_fcm = "io.github.blackfireteam.msimsdk:imsdk-push-fcm:1.0-SNAPSHOT"
    msimsdk.deps.msimsdk_gradle_plugin = "io.github.blackfireteam.msimsdk:imsdk-gradle-plugin:1.0-SNAPSHOT"

    apply from: 'git.version.gradle'
    apply from: 'versions.gradle'
    repositories {
        mavenLocal()
        maven {
            url('https://s01.oss.sonatype.org/content/repositories/releases/')
        }
        maven {
            url('https://s01.oss.sonatype.org/content/repositories/snapshots/')
        }
    }
    rootProject.ext.bcfg.addRepos(repositories)
    dependencies {
        classpath rootProject.ext.bcfg.deps.android_gradle_plugin
        classpath rootProject.ext.bcfg.deps.android_maven_gradle_plugin
        classpath rootProject.ext.bcfg.deps.gradle_bintray_plugin
        classpath rootProject.ext.bcfg.deps.kotlin_gradle_plugin
        classpath 'com.google.protobuf:protobuf-gradle-plugin:0.8.15'
        classpath rootProject.ext.msimsdk.deps.msimsdk_gradle_plugin
    }
}

allprojects {
    configurations.all {
        resolutionStrategy.cacheChangingModulesFor 0, 'seconds'
    }

    repositories {
        mavenLocal()
        maven {
            url('https://s01.oss.sonatype.org/content/repositories/releases/')
        }
        maven {
            url('https://s01.oss.sonatype.org/content/repositories/snapshots/')
        }
    }
    rootProject.ext.bcfg.addRepos(repositories)

    tasks.withType(Javadoc).all {
        options.addStringOption('Xdoclint:none', '-quiet')
        options.addStringOption('encoding', 'UTF-8')
        options.addStringOption('charset', 'UTF-8')
    }
}

task clean(type: Delete) {
    delete rootProject.buildDir
}
